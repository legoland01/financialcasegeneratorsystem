# 需求文档规范 - 避免遗漏关键信息

**目的**: 确保需求文档不遗漏关键信息，避免开发误解  
**适用范围**: 所有新项目

---

## 一、需求文档必备章节

### 1.1 核心设计原则（必须放在文档最前面）

每个需求文档必须包含"核心设计原则"章节，明确回答：

| 问题 | 必须回答 |
|------|---------|
| 核心流程 | 数据/证据由什么生成？LLM还是程序？ |
| 关键区分 | 哪些数据来自真实来源？哪些可以自动生成？ |
| 职责边界 | 每个组件不做什么？（必须明确"不做什么"） |

### 1.2 三层数据逻辑（如果涉及数据生成）

| 层级 | 数据类型 | 来源 | 真实数据要求 |
|------|---------|------|-------------|
| Layer 1 | 核心结构 | 判决书/配置文件 | ✅ 需要 |
| Layer 2 | 边界条件 | 判决书提取 | ✅ 需要 |
| Layer 3 | 详细数据 | 自动生成 | ❌ 不需要 |

必须用表格明确列出。

### 1.3 组件职责边界

每个新组件必须明确：

| 组件 | ✅ 做什么 | ❌ 不做什么 |
|------|---------|-----------|
| DataGenerator | 生成设备名称 | 不生成证据内容 |

---

## 二、开发交接清单

在开发开始前，产品经理必须与开发确认：

### 2.1 核心理解确认

- [ ] 核心流程：证据由LLM生成，不是程序生成
- [ ] 三层数据逻辑：边界条件 vs 详细数据的区别
- [ ] 组件职责：DataGenerator不生成证据内容

### 2.2 验收标准确认

- [ ] 每个功能都有明确的验收标准
- [ ] 每个Bug都有验证方法
- [ ] 包含测试命令/脚本

### 2.3 文档确认

- [ ] 开发已读"核心设计原则"
- [ ] 开发无异议
- [ ] 开发签字（邮件确认）

---

## 三、本次教训总结

### 3.1 本次问题

| 问题 | 遗漏内容 | 影响 |
|------|---------|------|
| 需求文档 | 没有明确写"LLM生成证据" | 开发不确定要不要用LLM |
| 三层逻辑 | 没有用清晰表格 | 开发不理解边界条件 vs 详细数据 |
| DataGenerator | 没有明确职责边界 | 开发可能让它生成证据内容 |

### 3.2 改进措施

| 改进 | 落地动作 |
|------|---------|
| 核心原则前置 | 需求文档第1章必须是"核心设计原则" |
| 职责边界明确 | 每个组件必须列"不做什么" |
| 三层逻辑表格 | 用表格区分数据来源和真实数据要求 |
| 开发确认 | 开发必须签字确认理解 |

---

## 四、需求文档模板

```markdown
# [项目名] 需求文档

**日期**: YYYY-MM-DD  
**版本**: v1.0

---

## 一、核心设计原则（开发必须先读）

### 1.1 核心流程
- 核心流程由___生成，不是___生成
- 流程：___ → ___ → ___

### 1.2 三层数据逻辑
| 层级 | 数据 | 来源 | 真实数据要求 |
|------|------|------|-------------|
| ... | ... | ... | ... |

### 1.3 组件职责边界
| 组件 | ✅ 做什么 | ❌ 不做什么 |
|------|---------|-----------|
| ... | ... | ... |

---

## 二、功能需求

...

## 三、验收标准

...

## 四、测试清单

...
```

---

**创建日期**: 2026-01-27  
**下次更新**: 下次项目开始时

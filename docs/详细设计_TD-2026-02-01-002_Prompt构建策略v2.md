# è¯¦ç»†è®¾è®¡æ–‡æ¡£ï¼šPromptæ„å»ºç­–ç•¥ï¼ˆv2.2ï¼‰

**æ–‡æ¡£ç¼–å·**: TD-2026-02-01-002
**ç‰ˆæœ¬**: v1.0
**ä½œè€…**: Agent2 (å¼€å‘)
**æ—¥æœŸ**: 2026-02-01
**çŠ¶æ€**: è®¾è®¡ä¸­

---

## ä¸€ã€æ¦‚è¿°

### 1.1 èƒŒæ™¯

é»‘ç›’æµ‹è¯•å‘ç°ï¼šä»…é PromptæŒ‡ä»¤ç¦æ­¢å ä½ç¬¦æ— æ•ˆï¼ŒLLMä»æŒç»­ç”Ÿæˆ`æŸæŸå…¬å¸`ã€`X4`ç­‰å ä½ç¬¦ã€‚

**æ ¹æœ¬åŸå› **ï¼šLLMéš¾ä»¥ä»JSONæ ¼å¼çš„Profileåº“ä¸­æ­£ç¡®æå–å¹¶ä½¿ç”¨å…·ä½“åç§°ã€‚

### 1.2 ç›®æ ‡

å®ç°Promptæ„å»ºç­–ç•¥ï¼Œåœ¨ç”Ÿæˆæ—¶ç›´æ¥åˆ—å‡ºæ‰€æœ‰å¿…é¡»ä½¿ç”¨çš„å…·ä½“ä¿¡æ¯ï¼Œè€Œéè®©LLMä»JSONä¸­æŸ¥æ‰¾ã€‚

### 1.3 æ ¸å¿ƒåŸåˆ™

**ä¸æ˜¯** "ç”Ÿæˆåæ›¿æ¢"
**è€Œæ˜¯** "ç”Ÿæˆæ—¶æä¾›å®Œæ•´ä¸Šä¸‹æ–‡"

---

## äºŒã€ç³»ç»Ÿè®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  EvidenceFileGenerator                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ build_evidence_prompt(evidence, evidence_type)      â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ 1. _extract_involved_companies()                    â”‚   â”‚
â”‚  â”‚ 2. _extract_amount_info()                           â”‚   â”‚
â”‚  â”‚ 3. _extract_date_info()                             â”‚   â”‚
â”‚  â”‚ 4. _build_party_info_section()                      â”‚   â”‚
â”‚  â”‚ 5. _assemble_prompt()                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµ

```
stage0_data (JSON) 
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¹è±¡æå–é˜¶æ®µ       â”‚
â”‚ - å…¬å¸: ä»Profile â”‚
â”‚ - é‡‘é¢: ä»KeyNum  â”‚
â”‚ - æ—¥æœŸ: ä»è¯æ®    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¿¡æ¯æ„å»ºé˜¶æ®µ       â”‚
â”‚ - å…¬å¸ä¿¡æ¯section â”‚
â”‚ - é‡‘é¢ä¿¡æ¯section â”‚
â”‚ - æ—¥æœŸä¿¡æ¯section â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Promptç»„è£…é˜¶æ®µ     â”‚
â”‚ - åŸºç¡€Prompt      â”‚
â”‚ - å…·ä½“ä¿¡æ¯æ³¨å…¥    â”‚
â”‚ - ç¦æ­¢å ä½ç¬¦è§„åˆ™  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
LLMç”Ÿæˆ
```

---

## ä¸‰ã€è¯¦ç»†è®¾è®¡

### 3.1 æ–¹æ³•1ï¼šextract_involved_companies

```python
def _extract_involved_companies(
    self,
    evidence: Dict[str, Any],
    profiles: Dict[str, Any]
) -> List[Dict[str, str]]:
    """
    ä»è¯æ®ä¿¡æ¯ä¸­æå–æ¶‰åŠçš„å…¬å¸åˆ—è¡¨
    
    Args:
        evidence: è¯æ®ä¿¡æ¯ï¼ˆå«"å…³é”®æ•°æ®æç¤º"å­—æ®µï¼‰
        profiles: Profileåº“ï¼ˆå«"å…¬å¸Profileåº“"ï¼‰
    
    Returns:
        æ¶‰åŠçš„å…¬å¸å®Œæ•´ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«ï¼š
        - è§’è‰² (role)
        - å…¬å¸åç§° (company_name)
        - ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç  (credit_code)
        - æ³•å®šä»£è¡¨äºº (legal_representative)
        - æ³¨å†Œåœ°å€ (address)
    """
    involved_companies = []
    
    # ä»è¯æ®çš„"å…³é”®æ•°æ®æç¤º"ä¸­æå–æ¶‰åŠæ–¹
    involved_markers = evidence.get("å…³é”®æ•°æ®æç¤º", {}).get("æ¶‰åŠæ–¹", [])
    
    if not involved_markers:
        logger.warning(f"è¯æ®æœªæŒ‡å®šæ¶‰åŠæ–¹: {evidence.get('è¯æ®åç§°', 'æœªçŸ¥')}")
        return []
    
    # ä»Profileåº“ä¸­æŸ¥æ‰¾æ¯ä¸ªå…¬å¸çš„å®Œæ•´ä¿¡æ¯
    company_profiles = profiles.get("å…¬å¸Profileåº“", {})
    
    for marker in involved_markers:
        # åœ¨å…¬å¸Profileåº“ä¸­æŸ¥æ‰¾å¯¹åº”å…¬å¸
        for key, company in company_profiles.items():
            if company.get("åŸè„±æ•æ ‡è¯†") == marker:
                involved_companies.append({
                    "role": marker,
                    "company_name": company.get("å…¬å¸åç§°", ""),
                    "credit_code": company.get("ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ", ""),
                    "legal_representative": company.get("æ³•å®šä»£è¡¨äºº", ""),
                    "address": company.get("æ³¨å†Œåœ°å€", ""),
                    "bank_account": company.get("é“¶è¡Œè´¦æˆ·", {}).get("è´¦å·", "")
                })
                logger.info(f"æ‰¾åˆ°å…¬å¸: {marker} -> {company.get('å…¬å¸åç§°', '')}")
                break
        else:
            logger.warning(f"æœªåœ¨Profileåº“ä¸­æ‰¾åˆ°å…¬å¸: {marker}")
    
    return involved_companies
```

### 3.2 æ–¹æ³•2ï¼šextract_amount_info

```python
def _extract_amount_info(
    self,
    evidence: Dict[str, Any],
    key_numbers: Dict[str, Any]
) -> Dict[str, Any]:
    """
    ä»è¯æ®å’Œå…³é”®é‡‘é¢æ¸…å•ä¸­æå–æ¶‰åŠé‡‘é¢
    
    Args:
        evidence: è¯æ®ä¿¡æ¯
        key_numbers: å…³é”®é‡‘é¢æ¸…å•
    
    Returns:
        é‡‘é¢ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«ï¼š
        - æ•°å€¼ (amount)
        - å•ä½ (unit)
        - å¤§å†™é‡‘é¢ (uppercase)
    """
    # é¦–å…ˆå°è¯•ä»è¯æ®çš„"å…³é”®æ•°æ®æç¤º"ä¸­è·å–
    amount_info = evidence.get("å…³é”®æ•°æ®æç¤º", {}).get("æ¶‰åŠé‡‘é¢", {})
    
    if amount_info:
        return {
            "amount": amount_info.get("æ•°å€¼", 0),
            "unit": amount_info.get("å•ä½", "å…ƒ"),
            "uppercase": self._convert_to_uppercase(amount_info.get("æ•°å€¼", 0))
        }
    
    # å¦‚æœè¯æ®æœªæŒ‡å®šï¼Œä»key_numbersä¸­æŸ¥æ‰¾
    contract_amount = key_numbers.get("åˆåŒåŸºç¡€é‡‘é¢", {}).get("åŸåˆåŒé‡‘é¢", {})
    amount_value = contract_amount.get("æ•°å€¼", 0)
    
    return {
        "amount": amount_value,
        "unit": "å…ƒ",
        "uppercase": self._convert_to_uppercase(amount_value)
    }
```

### 3.3 æ–¹æ³•3ï¼šextract_date_info

```python
def _extract_date_info(
    self,
    evidence: Dict[str, Any]
) -> Optional[str]:
    """
    ä»è¯æ®ä¿¡æ¯ä¸­æå–æ—¥æœŸ
    
    Args:
        evidence: è¯æ®ä¿¡æ¯
    
    Returns:
        æ ¼å¼åŒ–æ—¥æœŸå­—ç¬¦ä¸² (YYYYå¹´MMæœˆDDæ—¥) æˆ– None
    """
    # ä»å…³é”®æ•°æ®æç¤ºä¸­è·å–æ—¥æœŸ
    date_info = evidence.get("å…³é”®æ•°æ®æç¤º", {}).get("æ¶‰åŠæ—¥æœŸ", "")
    
    if date_info:
        return date_info
    
    return None
```

### 3.4 æ–¹æ³•4ï¼šbuild_party_info_section

```python
def _build_party_info_section(
    self,
    companies: List[Dict[str, str]]
) -> str:
    """
    æ„å»ºå½“äº‹äººä¿¡æ¯éƒ¨åˆ†
    
    Args:
        companies: æ¶‰åŠçš„å…¬å¸ä¿¡æ¯åˆ—è¡¨
    
    Returns:
        æ ¼å¼åŒ–åçš„å½“äº‹äººä¿¡æ¯å­—ç¬¦ä¸²
    """
    if not companies:
        return "ã€æ— æ¶‰åŠå…¬å¸ä¿¡æ¯ã€‘"
    
    section_lines = ["### å…¬å¸ä¿¡æ¯"]
    
    for company in companies:
        role = company.get("role", "å½“äº‹äºº")
        name = company.get("company_name", "æœªçŸ¥")
        code = company.get("credit_code", "æœªæä¾›")
        legal = company.get("legal_representative", "æœªæä¾›")
        address = company.get("address", "æœªæä¾›")
        
        section_lines.append(f"- {role}ï¼š{name}")
        section_lines.append(f"  ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ï¼š{code}")
        section_lines.append(f"  æ³•å®šä»£è¡¨äººï¼š{legal}")
        section_lines.append(f"  åœ°å€ï¼š{address}")
        section_lines.append("")  # ç©ºè¡Œåˆ†éš”
    
    return "\n".join(section_lines)
```

### 3.5 æ–¹æ³•5ï¼šassemble_prompt

```python
def _assemble_prompt(
    self,
    base_prompt: str,
    party_info: str,
    amount_info: Dict[str, Any],
    date_info: Optional[str],
    evidence: Dict[str, Any]
) -> str:
    """
    ç»„è£…å®Œæ•´Prompt
    
    Args:
        base_prompt: åŸºç¡€Promptæ¨¡æ¿
        party_info: å½“äº‹äººä¿¡æ¯section
        amount_info: é‡‘é¢ä¿¡æ¯å­—å…¸
        date_info: æ—¥æœŸä¿¡æ¯å­—ç¬¦ä¸²
        evidence: è¯æ®ä¿¡æ¯
    
    Returns:
        å®Œæ•´çš„Promptå­—ç¬¦ä¸²
    """
    # æ„å»ºå¿…é¡»ä½¿ç”¨çš„å…·ä½“ä¿¡æ¯section
    mandatory_info = ["## ã€å¿…é¡»ä½¿ç”¨çš„å…·ä½“ä¿¡æ¯ã€‘\n"]
    
    # å…¬å¸ä¿¡æ¯
    mandatory_info.append(party_info)
    mandatory_info.append("")
    
    # é‡‘é¢ä¿¡æ¯
    mandatory_info.append("### é‡‘é¢ä¿¡æ¯")
    mandatory_info.append(f"æ¶‰åŠé‡‘é¢ï¼šäººæ°‘å¸{amount_info['uppercase']}ï¼ˆÂ¥{amount_info['amount']:,.2f}ï¼‰")
    mandatory_info.append("")
    
    # æ—¥æœŸä¿¡æ¯
    if date_info:
        mandatory_info.append("### æ—¥æœŸä¿¡æ¯")
        mandatory_info.append(f"æ—¥æœŸï¼š{date_info}")
        mandatory_info.append("")
    
    # ç¦æ­¢å ä½ç¬¦è­¦å‘Š
    mandatory_info.append("## ğŸš¨ å¼ºåˆ¶è¦æ±‚")
    mandatory_info.append("ç”Ÿæˆå†…å®¹æ—¶å¿…é¡»ä½¿ç”¨ä¸Šè¿°å…·ä½“ä¿¡æ¯ï¼Œ")
    mandatory_info.append("**ç¦æ­¢**ä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š")
    mandatory_info.append("- 'æŸæŸå…¬å¸'ã€'æŸå…¬å¸'")
    mandatory_info.append("- 'æŸæŸ'ã€'æŸ'")
    mandatory_info.append("- 'X4'ã€'X5'ç­‰æ•°å­—å ä½ç¬¦")
    mandatory_info.append("- 'äººæ°‘å¸Xå…ƒ'ã€'X%'ç­‰é‡‘é¢å ä½ç¬¦")
    mandatory_info.append("")
    
    mandatory_section = "\n".join(mandatory_info)
    
    # ç»„è£…å®Œæ•´Prompt
    # ç¡®ä¿base_promptä¸­ä¸åŒ…å«ã€å¿…é¡»ä½¿ç”¨çš„å…·ä½“ä¿¡æ¯ã€‘å ä½ç¬¦
    # å› ä¸ºæˆ‘ä»¬ç°åœ¨ç›´æ¥æ³¨å…¥
    return f"{base_prompt}\n\n{mandatory_section}"
```

### 3.6 æ–¹æ³•6ï¼šbuild_evidence_promptï¼ˆå…¬å¼€æ¥å£ï¼‰

```python
def build_evidence_prompt(
    self,
    evidence: Dict[str, Any],
    evidence_type: str = "åˆåŒ"
) -> str:
    """
    æ„å»ºè¯æ®ç”Ÿæˆçš„å®Œæ•´Prompt
    
    è¿™æ˜¯ä¸»è¦çš„å…¬å¼€æ¥å£ï¼Œå¤–éƒ¨è°ƒç”¨æ­¤æ–¹æ³•ç”ŸæˆPrompt
    
    Args:
        evidence: è¯æ®ä¿¡æ¯ï¼ˆæ¥è‡ªè¯æ®å½’å±è§„åˆ’è¡¨ï¼‰
        evidence_type: è¯æ®ç±»å‹ï¼ˆåˆåŒ/æ–‡ä¹¦/å‡­è¯ï¼‰
    
    Returns:
        å®Œæ•´çš„Promptå­—ç¬¦ä¸²
    """
    logger.info(f"æ„å»ºè¯æ®Prompt: {evidence.get('è¯æ®åç§°', 'æœªçŸ¥')}")
    
    # è·å–stage0æ•°æ®ï¼ˆä»å®ä¾‹å˜é‡æˆ–å¤–éƒ¨ä¼ å…¥ï¼‰
    # è¿™é‡Œå‡è®¾stage0_dataå·²å­˜å‚¨åœ¨å®ä¾‹ä¸­
    stage0_data = getattr(self, '_stage0_data', {})
    profiles = stage0_data.get("0.2_è„±æ•æ›¿æ¢ç­–åˆ’", {})
    key_numbers = stage0_data.get("0.4_å…³é”®æ•°å­—æ¸…å•", {})
    
    # Step 1: æå–æ¶‰åŠçš„å…¬å¸
    companies = self._extract_involved_companies(evidence, profiles)
    
    # Step 2: æå–é‡‘é¢ä¿¡æ¯
    amount_info = self._extract_amount_info(evidence, key_numbers)
    
    # Step 3: æå–æ—¥æœŸä¿¡æ¯
    date_info = self._extract_date_info(evidence)
    
    # Step 4: æ„å»ºå½“äº‹äººä¿¡æ¯section
    party_info = self._build_party_info_section(companies)
    
    # Step 5: åŠ è½½åŸºç¡€Prompt
    prompt_path = self.prompt_dir / "stage1" / "1.2.1_å•ä¸ªè¯æ®ç”Ÿæˆ.md"
    if prompt_path.exists():
        base_prompt = load_prompt_template(str(prompt_path))
    else:
        base_prompt = self._get_default_prompt(evidence)
    
    # Step 6: ç»„è£…å®Œæ•´Prompt
    full_prompt = self._assemble_prompt(
        base_prompt=base_prompt,
        party_info=party_info,
        amount_info=amount_info,
        date_info=date_info,
        evidence=evidence
    )
    
    logger.info(f"è¯æ®Promptæ„å»ºå®Œæˆï¼Œå­—ç¬¦æ•°: {len(full_prompt)}")
    
    return full_prompt
```

### 3.7 è¾…åŠ©æ–¹æ³•ï¼šæ•°å­—è½¬å¤§å†™

```python
def _convert_to_uppercase(self, amount: float) -> str:
    """
    å°†æ•°å­—é‡‘é¢è½¬æ¢ä¸ºä¸­æ–‡å¤§å†™
    
    Args:
        amount: é‡‘é¢æ•°å€¼
    
    Returns:
        ä¸­æ–‡å¤§å†™é‡‘é¢å­—ç¬¦ä¸²
    """
    if amount <= 0:
        return "é›¶å…ƒ"
    
    # æ•°å­—åˆ°ä¸­æ–‡å¤§å†™çš„æ˜ å°„
    units = ["", "æ‹¾", "ä½°", "ä»Ÿ", "ä¸‡", "æ‹¾ä¸‡", "ä½°ä¸‡", "ä»Ÿä¸‡", "äº¿"]
    digits = "é›¶å£¹è´°åè‚†ä¼é™†æŸ’æŒç–"
    
    # å¤„ç†æ•´æ•°éƒ¨åˆ†
    int_part = int(amount)
    result = []
    int_str = str(int_part)
    length = len(int_str)
    
    for i, char in enumerate(int_str):
        digit = int(char)
        unit = units[length - i - 1]
        if digit != 0:
            result.append(f"{digits[digit]}{unit}")
        else:
            if not result or result[-1] != "é›¶":
                result.append("é›¶")
    
    # å»é™¤è¿ç»­çš„é›¶
    while "é›¶é›¶" in "".join(result):
        result = "é›¶".join("".join(result).split("é›¶"))
    
    # æ¸…ç†æœ«å°¾çš„é›¶
    if result and result[-1] == "é›¶":
        result = result[:-1]
    
    result.append("å…ƒ")
    
    # å¤„ç†å°æ•°éƒ¨åˆ†
    decimal_part = round(amount - int_part, 2)
    if decimal_part >= 0.01:
        decimal_str = f"{decimal_part:.2f}"
        decimal_digits = list(decimal_str.replace(".", ""))
        if decimal_digits[0] != "0":
            result.append(f"{digits[int(decimal_digits[0])]}è§’")
        if decimal_digits[1] != "0":
            result.append(f"{digits[int(decimal_digits[1])]}åˆ†")
    
    return "".join(result)
```

---

## å››ã€é›†æˆæ–¹æ¡ˆ

### 4.1 ä¿®æ”¹ç°æœ‰ä»£ç 

åœ¨ `EvidenceFileGenerator` ç±»ä¸­ï¼š

1. **æ–°å¢5ä¸ªæ–¹æ³•**ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰
2. **ä¿®æ”¹ `_generate_evidence_file` æ–¹æ³•**
3. **å­˜å‚¨ stage0_data** ä»¥ä¾›æå–ä½¿ç”¨

### 4.2 ä¿®æ”¹ç‚¹æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| `src/services/evidence_file_generator.py` | 1. æ·»åŠ 5ä¸ªæ–°æ–¹æ³•<br>2. ä¿®æ”¹ `__init__` å­˜å‚¨stage0_data<br>3. ä¿®æ”¹ `_generate_evidence_file` è°ƒç”¨æ–°æ–¹æ³• |
| `src/services/stage1/stage1_service.py` | ä¼ é€’stage0_dataç»™EvidenceFileGenerator |

---

## äº”ã€æ–‡ä»¶æ¸…å•

### 5.1 ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|---------|---------|
| `src/services/evidence_file_generator.py` | æ–°å¢6ä¸ªæ–¹æ³• |

### 5.2 æ–°å¢æµ‹è¯•

| æ–‡ä»¶è·¯å¾„ | è¯´æ˜ |
|---------|------|
| `tests/unit/test_prompt_builder.py` | Promptæ„å»ºå™¨å•å…ƒæµ‹è¯• |

---

## å…­ã€éªŒæ”¶æ ‡å‡†

| éªŒæ”¶é¡¹ | æ ‡å‡† |
|--------|------|
| æ¯ä¸ªè¯æ®çš„PromptåŒ…å«æ¶‰åŠå…¬å¸çš„å…·ä½“åç§° | 100% |
| æ¯ä¸ªè¯æ®çš„PromptåŒ…å«æ¶‰åŠé‡‘é¢ | 100% |
| æ¯ä¸ªè¯æ®çš„PromptåŒ…å«æ¶‰åŠæ—¥æœŸï¼ˆå¦‚æœ‰ï¼‰ | 100% |
| æ— å ä½ç¬¦æ®‹ç•™ | â‰¥95%é€šè¿‡ |
| æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡ | 22/22 |

---

## ä¸ƒã€é£é™©ä¸åº”å¯¹

| é£é™© | å¯èƒ½æ€§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|--------|------|---------|
| Profileåº“æ•°æ®ç¼ºå¤± | ä½ | ä¸­ | æ·»åŠ é»˜è®¤å€¼å’Œè­¦å‘Šæ—¥å¿— |
| é‡‘é¢è½¬æ¢é”™è¯¯ | ä½ | ä¸­ | æ·»åŠ å¼‚å¸¸å¤„ç†å’Œå›é€€é€»è¾‘ |
| Promptè¿‡é•¿å¯¼è‡´æˆªæ–­ | ä¸­ | ä½ | é™åˆ¶ä¿¡æ¯æ•°é‡ |

---

## å…«ã€æ—¶é—´ä¼°ç®—

| ä»»åŠ¡ | é¢„ä¼°æ—¶é—´ |
|------|---------|
| `_extract_involved_companies()` å®ç° | 30åˆ†é’Ÿ |
| `_extract_amount_info()` å®ç° | 20åˆ†é’Ÿ |
| `_extract_date_info()` å®ç° | 10åˆ†é’Ÿ |
| `_build_party_info_section()` å®ç° | 20åˆ†é’Ÿ |
| `_assemble_prompt()` å®ç° | 20åˆ†é’Ÿ |
| `build_evidence_prompt()` é›†æˆ | 30åˆ†é’Ÿ |
| `_convert_to_uppercase()` å®ç° | 20åˆ†é’Ÿ |
| å•å…ƒæµ‹è¯• | 60åˆ†é’Ÿ |
| **æ€»è®¡** | **çº¦3.5å°æ—¶** |

---

## ä¹ã€å‚è€ƒæ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `docs/PRODUCT_REQUIREMENTS.md` ç¬¬ä¸ƒç«  | Promptæ„å»ºç­–ç•¥éœ€æ±‚ |
| `docs/éœ€æ±‚è¯„å®¡è®°å½•_2026-02-01_v2_Promptæ„å»ºç­–ç•¥.md` | éœ€æ±‚è¯„å®¡è®°å½• |
| `src/services/evidence_file_generator.py` | ç°æœ‰ä»£ç  |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-01
**æœ€åæ›´æ–°**: 2026-02-01

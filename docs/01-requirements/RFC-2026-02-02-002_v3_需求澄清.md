# RFC-2026-02-002: v3.0 需求澄清

**类型**: 需求澄清  
**优先级**: 高  
**状态**: **已批准** ✓  
**日期**: 2026-02-02

---

## 一、问题背景

v3.0 PRD (PRD-2026-02-01-v3.0) 存在以下不清晰之处，需要明确规则。

---

## 二、待澄清问题

### Q1: 证据编造规则

**PRD原文**:
> 自行编造缺失但支撑诉求必须的证据（用于测试场景）
> - 可编造：设备名称、型号、数量等

**问题**:
1. 编造数据从哪里来？配置文件还是LLM自行编造？
2. 生产环境是否允许编造？

**建议规则**:
```
| 环境 | 规则 |
|------|------|
| 生产环境 | 不允许编造，缺失证据则跳过 |
| 测试环境 | 从配置文件加载预设数据 |
```

---

### Q2: 证据类型与附件形式映射

**PRD原文**:
> 合同类证据：必须规划附件

**问题**:
1. 凭证类、文书类是否需要附件？
2. 附件数据缺失如何处理？

**建议规则**:
```
| 证据类型 | 附件形式 | 说明 |
|----------|----------|------|
| 合同类 | 独立文件 | 必须生成租赁物清单等 |
| 凭证类 | 正文包含/不需 | 金额直接写在凭证中 |
| 文书类 | 不需 | 原文引用 |
| 附件类 | 独立文件 | 本身就是附件 |
```

---

### Q3: AttachmentInfo 数据结构

**问题**:
AttachmentInfo 的 data 字段格式不明确。

**建议定义**:
```python
@dataclass
class AttachmentInfo:
    type: str           # "租赁物清单" / "还款计划" / "应收账款清单"
    source: str         # "案情数据" / "配置文件" / "LLM编造"
    form: AttachmentForm  # "独立文件" / "正文包含"
    data: Optional[Dict[str, Any]] = None
```

---

### Q4: 两种生成模式定位

**PRD问题**:
`generate_from_judgment` 和 `generate_from_data` 区别不明确。

**建议规则**:
```
| 方法 | 使用场景 | 数据来源 |
|------|----------|----------|
| generate_from_judgment | 生产环境主流程 | 判决书 → F2.1 → ... |
| generate_from_data | 测试/调试 | 已有 CaseData，跳过 F2.1/F2.2 |
```

---

### Q5: 模块间数据传递规则

**问题**:
EvidenceCollector 需要 CaseData 还是直接读取判决书？

**建议规则**:
```
所有模块从 CaseData 获取信息，不直接访问判决书。

F2.1 输出 CaseData（包含所有从判决书提取的信息）
后续模块：CaseData → CaseData → CaseData（只读）
```

---

## 三、建议行动

- [ ] 产品经理确认以上规则
- [ ] 更新 PRD 补充不清晰章节
- [ ] 更新设计文档反映确认的规则
- [ ] 更新测试用例覆盖新规则

---

## 四、Agent2（开发）评审意见

**评审日期**: 2026-02-02  
**状态**: **同意** ✓

**评审意见**:
- Q1-Q5 的澄清都是开发过程中实际遇到的问题
- 建议规则合理，与 v3.0 核心原则一致
- 建议的 Action items 可执行

---

## 五、Agent1（产品）评审意见

**评审日期**: ________  
**状态**: 待签署

**评审意见**:

---

## 六、最终决策

**状态**: 待双方签署完成

---

**创建人**: Agent2 (开发)  
**创建日期**: 2026-02-02

**Agent2 签署**: Agent2 (开发) - 2026-02-02  
**Agent1 签署**: ________

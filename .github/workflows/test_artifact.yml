name: Simple Artifact Test

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Create test files
        run: |
          mkdir -p outputs_complete/test outputs/test
          echo "test content" > outputs_complete/test/file.txt
          echo "pdf content" > outputs_complete/evidence.pdf
          echo "stage0 content" > outputs/stage0/data.json
          ls -laR outputs/
      
      - name: Upload evidence PDF
        uses: actions/upload-artifact@v4
        with:
          name: evidence-pdf
          path: outputs_complete/
          retention-days: 1
      
      - name: Upload outputs
        uses: actions/upload-artifact@v4
        with:
          name: outputs
          path: outputs/
          retention-days: 1
      
      - name: Verify artifacts
        run: |
          echo "=== Checking artifacts ==="
          echo "This step should run after uploads"
